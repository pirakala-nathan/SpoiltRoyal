= nested_form_for @vendor, html: { multipart: true } do |f|
  -# Vendor Part Starts-------------------------------------------------
  - if @vendor.errors.any?
    #error_explanation
      %h2
        = pluralize(@vendor.errors.count, "error")
        prohibited this vendor from being saved:
      %ul
        - @vendor.errors.full_messages.each do |message|
          %li= message
  .field
    = f.label :business_name
    = f.text_field :business_name
  .field
    = f.label :business_description
    = f.text_field :business_description
  .field
    = f.label :establish_date
    = f.date_select :establish_date
  .field
    = f.label :tax_number
    = f.number_field :tax_number
  .field
    = f.label :shipping
    = f.check_box :shipping
  .field
    = f.label :accepted_payment
  .field
    = collection_check_boxes(:vendor, :payment_method_ids, PaymentMethod.all, :id, :name)

  -# personal info part starts --------------------------------------------
  =f.fields_for :personal_infos do |pi|
    =pi.link_to_remove "Remove Personal Infos"
    .field
      = pi.label :legal_first_name
      = pi.text_field :legal_first_name
    .field
      = pi.label :legal_last_name
      = pi.text_field :legal_last_name
    .field
      = pi.label :preferred_name
      = pi.text_field :preferred_name
    .field
      = pi.label :email
      = pi.text_field :email
    .field
      = pi.label :title
      = pi.text_field :title
    .field
      = pi.label :primary_phone
      = pi.number_field :primary_phone
    .field
      = pi.label :secondary_phone
      = pi.number_field :secondary_phone
  = f.link_to_add "Add Personal Infos", :personal_infos

  -# Physical Location Part Starts-----------------------------------------
  =f.fields_for :physical_locations do |pl|
    -# You can add an id to this and use css to change it into something you want like an X.
    =pl.link_to_remove "Remove Physical Location"
    .field
      = pl.label :address
      = pl.text_field :address
    .field
      = pl.label :postal_code
      = pl.text_field :postal_code
    .field
      -# partial file containing the drop downs for country, province, and city
      = render 'layouts/location_selector', location: pl
    .field
      = pl.label :business_phone
      = pl.text_field :business_phone
    .field
      = pl.label :other_phone
      = pl.text_field :other_phone
    .field
      = pl.label :fax
      = pl.text_field :fax
    .field
      = pl.label :business_email
      = pl.text_field :business_email
    .field
      = pl.label :business_website
      = pl.text_field :business_website
    .field
      = pl.label :sale_location
      = pl.check_box :sale_location
  -# same as remove, text can be changed or remove and use
  -# css to change the way it looks
  = f.link_to_add "Add Physical Location", :physical_locations

  -# Industry (AKA Vendor subscription) Starts -----------------------------------
  -# multi select needs to be done by javascript and css:
    -# make this hidden and make a UI using css
    -# adding a new industry/category/subcategory will trigger the link_to_add and link_to_remove
    -# along with the filled sub form
  = f.fields_for :vendor_subscriptions do |vs|
    .field
      / drop down selectors for industry, category, and sub category
      = render 'layouts/industry_selector', industry: vs
      = vs.link_to_remove "Remove Industry"
  = f.link_to_add "Add Industry", :vendor_subscriptions

  -# Delivery Location Starts ----------------------------------------------------
  = f.fields_for :delivery_locations do |dl|
    .field
      = render 'layouts/location_selector', location: dl
      = dl.link_to_remove "Remove Delivery_Location"
  = f.link_to_add "Add Delivery Location", :delivery_locations

  = f.fields_for :external_links do |el|
    .field
      = el.label :link
      = el.text_field :link
      = el.label :type
      = el.select(:external_source_id, ExternalSource.all.collect { |s| [s.source_type, s.id] }, prompt: "type")
      = el.link_to_remove "Remove Link"
  = f.link_to_add "Add Link", :external_links

  = f.fields_for :assets do |a|
    .field
      - if a.object.nil? || a.object.new_record?
        = a.file_field :image
      - else
        = image_tag a.object.image.url(:thumb)
        = a.link_to_remove "Remove Image"
  = f.link_to_add "Add Picture", :assets
  .actions
    = f.submit